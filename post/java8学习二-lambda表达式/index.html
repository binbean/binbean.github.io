<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai.min.css" rel="stylesheet">
  
  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  <script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">

	
	MathJax.Hub.Config({
	  tex2jax: {
	    inlineMath: [['$','$'], ['\\(','\\)']],
	    displayMath: [['$$','$$'], ['\[','\]']],
	    processEscapes: true,
	    processEnvironments: true,
	    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
	    TeX: { equationNumbers: { autoNumber: "AMS" },
	         extensions: ["AMSmath.js", "AMSsymbols.js"] }
	  }
	});

	MathJax.Hub.Queue(function() {
	    
	    
	    
	    var all = MathJax.Hub.getAllJax(), i;
	    for(i = 0; i < all.length; i += 1) {
	        all[i].SourceElement().parentNode.className += ' has-jax';
	    }
	});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>


  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.41" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  
  <meta content="Java8, Lambda, Lambdaè¡¨è¾¾å¼" name="keywords">
  <meta content="Java8å­¦ä¹ äºŒ Lambdaè¡¨è¾¾å¼" property="og:title">
  <meta content="Java8 Lambdaè¡¨è¾¾å¼ã€å‡½æ•°å¼æ¥å£ã€å‡½æ•°æè¿°ç¬¦ã€æ–¹æ³•å¼•ç”¨ã€å¤åˆLanbdaè¡¨è¾¾å¼ç”¨æ³•ç­‰ã€‚" property="og:description">
  

  <title>Java8å­¦ä¹ äºŒ Lambdaè¡¨è¾¾å¼ &middot; è±†å­.å­¦ä¹ ç¬”è®°</title>

  
  <link type="text/css" rel="stylesheet" href="https://binbean.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://binbean.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://binbean.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://binbean.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="è±†å­.å­¦ä¹ ç¬”è®°" />

  
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://binbean.github.io/"><h1>è±†å­.å­¦ä¹ ç¬”è®°</h1></a>
      <br/>
      <br/>
      <p class="lead">
       The Coder of Java 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="https://binbean.github.io/">é¦–é¡µ</a> </li>
      <li><a href="https://binbean.github.io//categories/">åˆ†ç±»</a> </li>
      <li><a href="https://binbean.github.io//tags/">æ ‡ç­¾</a> </li>
      
    </ul>

    <br/>
    <br/>
    <p>Copyright (c) 2018, BinBin Wen</p>
    <p>Powered by Hugo 0.40.3</p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>Java8å­¦ä¹ äºŒ Lambdaè¡¨è¾¾å¼</h1>
  <span class="post-date">2018-08-30 23:15:03
    &nbsp;&nbsp;&nbsp;&nbsp;å­—æ•°ï¼š587
  </span>
  

<h3 id="ä»€ä¹ˆæ˜¯lambdaè¡¨è¾¾å¼">ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼</h3>

<p>Lambdaè¡¨è¾¾å¼å¯ä»¥ç†è§£ä¸ºä¸€ç§åŒ¿åå‡½æ•°ï¼šæ²¡æœ‰åç§°ï¼Œä½†æœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä½“å’Œè¿”å›ç±»å‹ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ä¸ªå¯æŠ›å‡ºå¼‚å¸¸åˆ—è¡¨</p>

<h3 id="lambdaè¡¨è¾¾å¼ç»„æˆ">Lambdaè¡¨è¾¾å¼ç»„æˆ</h3>

<blockquote>
<ul>
<li>(parameters) -&gt; expression</li>
<li>(parameters) -&gt; {expression;}</li>
</ul>
</blockquote>

<div>
$$
\underbrace{(Apple \quad a1, Apple \quad a2)}_{å‚æ•°åˆ—è¡¨}\quad \overbrace{->}^{ç®­å¤´}\quad \underbrace{a1.getWeight()-a2.getWeight()}_{å‡½æ•°ä¸»ä½“}
$$
</div>

<h3 id="åœ¨å“ªé‡Œä»¥åŠå¦‚ä½•ä½¿ç”¨lambdaè¡¨è¾¾å¼">åœ¨å“ªé‡Œä»¥åŠå¦‚ä½•ä½¿ç”¨Lambdaè¡¨è¾¾å¼</h3>

<p>åœ¨å‡½æ•°å¼æ¥å£ä¸Šä½¿ç”¨Lambdaè¡¨è¾¾å¼ã€‚</p>

<h3 id="å‡½æ•°å¼æ¥å£">å‡½æ•°å¼æ¥å£</h3>

<p>åªå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼ˆ<strong>Java8ä¸­æ¥å£æœ‰é»˜è®¤æ–¹æ³•</strong>ï¼‰</p>

<h3 id="å‡½æ•°æè¿°ç¬¦">å‡½æ•°æè¿°ç¬¦</h3>

<p>å‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•ç­¾åï¼Œå³æ¥å—ä»€ä¹ˆå‚æ•°ï¼Œè¿”å›ä»€ä¹ˆå€¼ç±»å‹ã€‚</p>

<blockquote>
<p>ä¾‹å¦‚ï¼š<code>() -&gt; void</code>,æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰è¿”å›å€¼ï¼Œè¿™æ­£æ˜¯Runableæ¥å£çš„ä»£è¡¨ã€‚</p>
</blockquote>

<h3 id="functionalinterface">@FunctionalInterface</h3>

<p>è¿™ä¸ªæ ‡æ³¨ç”¨äºè¡¨ç¤ºè¯¥æ¥å£ä¼šè®¾è®¡æˆä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚ å¦‚æœä½ ç”¨@FunctionalInterfaceå®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œ è€Œå®ƒå´ä¸æ˜¯å‡½æ•°å¼æ¥å£çš„è¯ï¼Œ ç¼–è¯‘å™¨å°†è¿”å›ä¸€ä¸ªæç¤ºåŸå› çš„é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œé”™è¯¯æ¶ˆæ¯å¯èƒ½æ˜¯â€œ Multiple non- overriding abstract methods found in interface Fooâ€ã€‚</p>

<h3 id="ä½¿ç”¨å‡½æ•°å¼æ¥å£">ä½¿ç”¨å‡½æ•°å¼æ¥å£</h3>

<p>Java8æä¾›ï¼Œåœ¨<code>java.util.function</code>åŒ…ä¸­</p>

<ul>
<li>Predicate</li>
</ul>

<p>æ¥å£: <code>(T) -&gt; boolean</code></p>

<pre><code>@FunctionalInterface public interface Predicate&lt; T&gt;{ 
	boolean test( T t); 
}
</code></pre>

<p>ä½¿ç”¨ç¤ºä¾‹ï¼šè¿‡æ»¤ç©ºå­—ç¬¦ä¸²</p>

<pre><code>public class PredicateDemo {
    public static &lt;T&gt;List&lt;T&gt; filter(List&lt;T&gt; list, Predicate&lt;T&gt; p) {
        List&lt;T&gt; result = new ArrayList&lt;&gt;();
        for (T e : list){
            if (p.test(e)){
                result.add(e);
            }
        }
        return result;
    }

    public static void main(String[] args) {
        Predicate&lt;String&gt; noEmtpyString = s -&gt; !s.isEmpty();
        List&lt;String&gt; result = filter(
                Arrays.asList(&quot;11&quot;, &quot;&quot;, &quot;23&quot;),
                noEmtpyString);
        System.out.println(result);
    }
}

</code></pre>

<ul>
<li>Consumer</li>
</ul>

<p>æ¥å£: <code>(T) -&gt; void</code></p>

<pre><code>@FunctionalInterface 
public interface Consumer&lt;T&gt;{ 
	void accept( T t);
}
</code></pre>

<p>ä½¿ç”¨ç¤ºä¾‹ï¼šå¾ªç¯æ‰“å°Listæ•°æ®</p>

<pre><code>public class CousumerDemo {
    public static &lt;T&gt; void forEach(List&lt;T&gt; list, Consumer&lt;T&gt; c){
        for (T e : list){
            c.accept(e);
        }
    }

    public static void main(String[] args) {
        forEach(Arrays.asList(1, 2, 3, 4), 
                integer -&gt; System.out.println(integer));
    }
}
</code></pre>

<ul>
<li>Function</li>
</ul>

<p>æ¥å£: <code>(T) -&gt; R</code></p>

<pre><code>@FunctionalInterface 
public interface Function&lt; T, R&gt;{ 
	R apply( T t); 
}
</code></pre>

<p>ä½¿ç”¨ç¤ºä¾‹ï¼šè®¡ç®—List<String>å­—ç¬¦ä¸²é•¿åº¦å¹¶è¿”å›List<Integer></p>

<pre><code class="language-java">public class FunctionDemo {
    public static &lt;T, R&gt; List&lt;R&gt; map(List&lt;T&gt; list, Function&lt;T, R&gt; f) {
        List&lt;R&gt; result = new ArrayList&lt;&gt;();
        for (T e: list){
            result.add(f.apply(e));
        }
        return result;
    }

    public static void main(String[] args) {
        List&lt;Integer&gt; result = map(
        	Arrays.asList(&quot;binbean&quot;, &quot;&quot;, &quot;mao&quot;), 
        	s -&gt; s.length());
        System.out.println(result);
    }
}
</code></pre>

<h3 id="java8ä¸­çš„å¸¸ç”¨å‡½æ•°å¼æ¥å£">Java8ä¸­çš„å¸¸ç”¨å‡½æ•°å¼æ¥å£</h3>

<table>
<thead>
<tr>
<th>å‡½æ•°å¼æ¥å£</th>
<th>å‡½æ•°æè¿°ç¬¦</th>
<th>åŸå§‹ç±»å‹ç‰¹åŒ–</th>
</tr>
</thead>

<tbody>
<tr>
<td>Predicate<T></td>
<td>T-&gt;boolean</td>
<td>IntPredicate,LongPredicate<br>DoublePredicate</td>
</tr>

<tr>
<td>Consumer<T></td>
<td>T-&gt;void</td>
<td>IntConsumer,LongConsumer<br>DoubleConsumer</td>
</tr>

<tr>
<td>Function<T,R></td>
<td>T-&gt;R</td>
<td>IntFunction<R>,<br>IntToDoubleFunction,<br>IntToLongFunction,<br>LongFunction<R>,<br>LongToDoubleFunction,<br>LongToIntFunction,<br>DoubleFunction<R>,<br>ToIntFunction<T>,<br>ToDoubleFunction<T>,<br>ToLongFunction<T></td>
</tr>

<tr>
<td>Supplier<T></td>
<td>()-&gt;T</td>
<td>BooleanSupplier,IntSupplier,<br>LongSupplier,DoubleSupplier</td>
</tr>

<tr>
<td>UnaryOperator<T></td>
<td>T-&gt;T</td>
<td>IntUnaryOperator,<br>LongUnaryOperator,<br>DoubleUnaryOperator</td>
</tr>

<tr>
<td>BinaryOperator<T></td>
<td>(T,T)-&gt;T</td>
<td>IntBinaryOperator,<br>LongBinaryOperator,<br>DoubleBinaryOperator</td>
</tr>

<tr>
<td>BiPredicate<L,R></td>
<td>(L,R)-&gt;boolean</td>
<td></td>
</tr>

<tr>
<td>BiConsumer<T,U></td>
<td>(T,U)-&gt;void</td>
<td>ObjIntConsumer<T>,<br>ObjLongConsumer<T>,<br>ObjDoubleConsumer</td>
</tr>

<tr>
<td>BiFunction<T,U,R></td>
<td>(T,U)-&gt;R</td>
<td>ToIntBiFunction<T,U>,<br>ToLongBiFunction<T,U><br>ToDoubleBiFunction<T,U></td>
</tr>
</tbody>
</table>

<h3 id="ä½¿ç”¨ç¤ºä¾‹">ä½¿ç”¨ç¤ºä¾‹</h3>

<table>
<thead>
<tr>
<th>ä½¿ç”¨æ¡ˆä¾‹</th>
<th>Lambda</th>
<th>å¯¹åº”å‡½æ•°æ¥å£</th>
</tr>
</thead>

<tbody>
<tr>
<td>è¿”å›å¸ƒå°”å€¼</td>
<td>(List<String> list) -&gt;list,isEmpty()</td>
<td>Predicate<String></td>
</tr>

<tr>
<td>åˆ›å»ºå¯¹è±¡</td>
<td>() -&gt; new Apple(10)</td>
<td>Supplier<Apple></td>
</tr>

<tr>
<td>æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡</td>
<td>(Apple a) -&gt; System.out.println(a.getWeight())</td>
<td>Consumer<Apple></td>
</tr>

<tr>
<td>ä»ä¸€ä¸ªå¯¹è±¡é€‰æ‹©/æŠ½å–</td>
<td>(String s) -&gt; s.length()</td>
<td>Function<String,<br/>Integer&gt;,<br>ToIntFunction<String></td>
</tr>

<tr>
<td>åˆå¹¶ä¸¤ä¸ªå€¼</td>
<td>(int a, int b) -&gt; a*b</td>
<td>IntBinaryOperator</td>
</tr>

<tr>
<td>å¯¹è±¡æ¯”è¾ƒ</td>
<td>(Apple a1, Apple a2) -&gt; a1.getWeight() - a2.getWeight()</td>
<td>Comparator<Apple><br>BiFunction<Apple,Apple,Integer><br>ToIntBiFunction<Apple,Apple></td>
</tr>
</tbody>
</table>

<h3 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</h3>

<pre><code class="language-java">// æ¥å£å‡½æ•°
@FunctionalInterface
public interface BufferReaderProcessor {
    String process(BufferedReader b) throws IOException;
}
</code></pre>

<pre><code class="language-java">Function&lt;BufferedReader, String&gt; f = (BufferedReader br) -&gt; {
        try{
            return br.readLine();
        }catch (IOException e){
            throw new RuntimeException();
        }
};
</code></pre>

<h3 id="ä½¿ç”¨å±€éƒ¨å˜é‡">ä½¿ç”¨å±€éƒ¨å˜é‡</h3>

<p>å±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜ä¸ºfinal</p>

<p>ååˆ—</p>

<pre><code class="language-java">int portNumber = 1337;
//é”™è¯¯ï¼šLambdaè¡¨è¾¾å¼å¼•ç”¨éfinalå£°æ˜çš„å±€éƒ¨å˜é‡
Runable r = () -&gt; System.out.println(portNumber);
</code></pre>

<h3 id="æ–¹æ³•å¼•ç”¨">æ–¹æ³•å¼•ç”¨</h3>

<p>æ–¹æ³•å¼•ç”¨å¯ä»¥è¢«çœ‹ä½œä»…ä»…è°ƒç”¨ç‰¹å®šæ–¹æ³•çš„Lambda çš„ä¸€ç§å¿«æ·å†™æ³•ã€‚èƒ½æé«˜ä»£ç å¯è¯»æ€§ã€‚</p>

<h4 id="ä¸‰ç±»æ–¹æ³•å¼•ç”¨">ä¸‰ç±»æ–¹æ³•å¼•ç”¨</h4>

<ul>
<li>é™æ€æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ï¼Œä¾‹å¦‚ï¼š<code>Integer::parseInt</code></li>
<li>å®ä¾‹æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨, ä¾‹å¦‚ï¼š<code>String:length</code></li>
<li>æŒ‡å‘ç°æœ‰å¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨</li>
</ul>

<h4 id="æ„é€ å‡½æ•°åº”ç”¨">æ„é€ å‡½æ•°åº”ç”¨</h4>

<ul>
<li>Supplier</li>
</ul>

<pre><code class="language-java">//public Apple(){}
Supplier&lt;Apple&gt; supplier = Apple::new;
// è¿”å›Appleå¯¹è±¡
Apple apple = supplier.get();
</code></pre>

<p>ç­‰ä»·äºä¸‹é¢ä»£ç </p>

<pre><code class="language-java">Supplier&lt;Apple&gt; supplier = () -&gt; new Apple();
// è¿”å›Appleå¯¹è±¡
Apple apple = supplier.get();
</code></pre>

<ul>
<li>Function</li>
</ul>

<pre><code class="language-java">//public Apple(Integer weight){...}
Function&lt;Integer, Apple&gt; function = Apple::new;
Apple apple1 = function.apply(10);
</code></pre>

<p>ç­‰ä»·äºä¸‹é¢ä»£ç </p>

<pre><code class="language-java">Function&lt;Integer, Apple&gt; function = weight -&gt; new Apple(weight);
Apple apple1 = function.apply(100);
</code></pre>

<ul>
<li>BiFunction</li>
</ul>

<pre><code class="language-java">//public Apple(Integer weight, String color){...}
BiFunction&lt;Integer, String, Apple&gt; biFunction = Apple::new;
Apple apple2 = biFunction.apply(150, &quot;green&quot;);
</code></pre>

<p>ç­‰ä»·äºä¸‹é¢ä»£ç </p>

<pre><code class="language-java">BiFunction&lt;Integer, String, Apple&gt; biFunction = 
                (weight, color) -&gt; new Apple(weight, color);
Apple apple2 = biFunction.apply(150, &quot;green&quot;);
</code></pre>

<h3 id="å¤åˆlambdaè¡¨è¾¾å¼ç”¨æ³•">å¤åˆLambdaè¡¨è¾¾å¼ç”¨æ³•</h3>

<ul>
<li>æ¯”è¾ƒå™¨å¤åˆ</li>
</ul>

<pre><code class="language-java">//é€†åº
list.sort(Comparator.comparingInt(Apple::getWeight).reversed());

//æ¯”è¾ƒé“¾
list.sort(Comparator.comparingInt(Apple::getWeight)
        .reversed()
        .thenComparing(Apple::getColor));
</code></pre>

<ul>
<li>è°“è¯å¤åˆ:<code>negate</code>,<code>and</code>,<code>or</code></li>
</ul>

<pre><code class="language-java">//çº¢ğŸ
Predicate&lt;Apple&gt; redApple = apple -&gt; &quot;red&quot;.equals(apple.getColor());
// negate:éçº¢ğŸ
Predicate&lt;Apple&gt; notRedApple = redApple.negate();
//and: çº¢ğŸå¹¶ä¸”é‡çš„ï¼ˆå¤§äº150gï¼‰
Predicate&lt;Apple&gt; redAndHeavyApple = redApple.and(
        apple -&gt; apple.getWeight() &gt; 150);
//and, or: çº¢ğŸå¹¶ä¸”é‡çš„ï¼ˆå¤§äº150gï¼‰æˆ–ç»¿ğŸ
Predicate&lt;Apple&gt; redAndHeavyOrGreenApple =
        //redAndHeavyApple.or(apple -&gt; &quot;green&quot;.equals(apple.getColor()));
        redApple.and(apple -&gt; apple.getWeight() &gt; 150)
                .or(apple -&gt; &quot;green&quot;.equals(apple.getColor()));
</code></pre>

<ul>
<li>å‡½æ•°å¤åˆ:<code>andThen</code>,<code>compose</code></li>
</ul>

<pre><code class="language-java">Function&lt;Integer, Integer&gt; f = x -&gt; x + 1;
// 4 == (x + 1) *2 == g(f(x))
int result = f.andThen(x -&gt; x * 2).apply(1);
//3 == x * 2 + 1 == f(g(x))
int result2 = f.compose((Integer x) -&gt; x * 2).apply(1); 
</code></pre>

<h3 id="one-more-thing">One more thing</h3>

<p>ä½¿ç”¨å‡½æ•°å¼•ç”¨å®ç°è‹¹æœæ’åº</p>

<pre><code class="language-java">List&lt;Apple&gt; inventory = Arrays.asList(
                new Apple(80, &quot;green&quot;),
                new Apple(155, &quot;green&quot;),
                new Apple(120, &quot;red&quot;));
//comparingInt intåŸºæœ¬ç±»å‹ç‰¹æ®Šå¤„ç†ï¼Œå‡å°‘è‡ªåŠ¨è£…ç®±/å¼€ç®±çš„å¼€é”€                
inventory.sort(Comparator.comparingInt(Apple::getWeight));
inventory.sort(Comparator.comparing(Apple::getColor));
</code></pre>

<blockquote>
<p><code>comparing</code>å’Œ<code>comparingInt</code>æ˜¯<code>Comparator</code>å‡½æ•°å¼æ¥å£çš„é»˜è®¤å®ç°ã€‚<code>comparingInt</code>ä¸º<code>int</code>åŸºç¡€ç±»å‹çš„ç‰¹æ®Šå¤„ç†ï¼Œä»¥å‡å°‘è‡ªåŠ¨è£…ç®±/å¼€ç®±çš„å¼€é”€ã€‚</p>
</blockquote>

</div>



<div id="git-comments"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    id: '20180830231503',  
    owner: 'binbean',
    repo: 'Gitment',
    oauth: {
      client_id: '5abe7f2c0a045b632a03',
      client_secret: '5e344f27030ca6bff90af981e47272a1848e3bea',
    }
  })
  gitment.render('git-comments')
</script>
    </div>

    
  </body>
</html>